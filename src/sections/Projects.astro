---
import Button from "@/components/Button.astro";
import Title from "@/components/Title.astro";
import Code from "@/components/icons/code.astro";
import Link from "@/components/icons/link.astro";
import { PROJECTS } from "@/lib/projects";
---

<section id="proyectos" class="pt-24">
  <Title>
    <Code class="size-7" /> Proyectos
  </Title>

  {
    PROJECTS.map(({ id, images, title, description, info, tags }) => (
      <article class="mb-16 grid items-start gap-x-4 last:mb-0 sm:grid-cols-2 md:gap-x-8">
        <h3 class="mb-2 text-2xl font-semibold text-primary-600 dark:text-primary-300 sm:col-start-2">
          {title}
        </h3>
        <p class="line-clamp-3 max-sm:mb-4 sm:order-2 sm:col-start-2">
          {description} - {info}
        </p>
        <ul class="mb-2 flex flex-wrap gap-2 sm:order-1 sm:col-start-2">
          {tags.slice(0, 3).map((tag) => (
            <li>
              <span
                class={`flex gap-x-2 rounded-full border border-${tag.color}-200 bg-${tag.color}-50 px-2 py-1 text-xs text-${tag.color}-900 dark:border-${tag.color}-900 dark:bg-${tag.color}-950 dark:text-${tag.color}-200`}
              >
                <tag.icon class="size-4" /> {tag.name}
              </span>
            </li>
          ))}
        </ul>
        <a
          class="group aspect-video w-full overflow-hidden rounded-lg shadow-2xl dark:shadow-white/10 sm:order-first sm:row-span-5"
          href={`/projects/${id}`}
          transition:name={`image-${id}`}
        >
          <img
            class="w-full object-cover transition-transform group-hover-active:scale-110"
            src={images[0]}
            alt="Proyecto Martín Sepúlveda"
          />
        </a>

        <footer class="mt-4 flex flex-wrap gap-4 sm:order-3 sm:col-start-2">
          <Button href={`/projects/${id}`}>
            <Link class="-ml-1 size-6" /> Ver más
          </Button>
        </footer>
      </article>
    ))
  }
</section>

<style>
  @supports (animation-timeline: view()) {
    article {
      animation-timeline: view();
      animation-name: show;
      animation-timing-function: ease-in;
    }
  }

  @keyframes show {
    0% {
      opacity: 0;
      translate: 0 100px;
    }
    20% {
      opacity: 1;
      translate: 0 0;
    }
  }
</style>
